<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
     <link rel="stylesheet" href="jquery.css">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
  </head>
  <body>
  <div class = "container">AJAX</div>
  <button>Click here</button>
  <ul class = "characters">
  </ul>
  </div>
  <script type = "text/javascript">
  $(document).ready(function(){

    $('button').on('click', function(){
      $.ajax({
        url:"https://ironhack-characters.herokuapp.com/characters",
        success: showCharacters,
        error: errorFunction

      })
    });
    /*function fetchCharacters(){
      var httpRequest = new XMLHttpRequest();
      httpRequest.open("GET", "https://ironhack-characters.herokuapp.com/characters");
      httpRequest.onreadystatechange = handleResponse;
      httpRequest.send();
    }
    function handleResponse(event){
      var httpRequest = event.currentTarget;
      if (httpRequest.readyState === 4){
        if(httpRequest.status === 200){
          console.log('---without jQuery ---');
          showCharacters(JSON.parse(httpRequest.responseText));

        }else{
          alert("There was an error");
        }
      }
    }*/
    function errorFunction(){
      alert("There was an error")
    }

    function showCharacters (response){
      var charactersArray = response;
    var html = "";
      charactersArray.forEach(function (theCharacter){
        html += `<li> Name: ${theCharacter.name}</li>`;
        html += `<li> Job: ${theCharacter.occupation}</li>`;
        html += `<li> Weapon: ${theCharacter.weapon}</li>`;
        if(theCharacter.debt){
          html += `<li> Is in debt</li>`;
        }
         console.log(theCharacter);
      });
      $('.container').html(html);
    }
    



  });
  </script>

  </body>
</html>